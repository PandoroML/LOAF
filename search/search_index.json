{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"LOAF (Local Observations and Atmospheric Forecasting)","text":"<p>Open source hyperlocal weather forecasting you can deploy yourself.</p>"},{"location":"#why-loaf","title":"Why LOAF?","text":"<p>Standard weather forecasts operate on 3km grids. That resolution can't capture the wind patterns at your specific site\u2014whether it's a backyard wind turbine, a fire-prone hillside, or a remote research station.</p> <p>Recent ML research shows that fusing gridded forecasts with local sensor data via transformers can reduce prediction error by up to 80%. Commercial services like Tomorrow.io offer this, but they're proprietary and subscription-based. The academic code exists, but there's no practical way to go from \"I have a Raspberry Pi\" to \"I have hyperlocal forecasts.\"</p> <p>LOAF bridges that gap: open source hardware, open source models, no vendor lock-in. Build a sensor, train a model for your region, run inference locally.</p> <p>Built on research from MIT Earth Intelligence Lab:</p> <ul> <li>Earth-Intelligence-Lab/LocalizedWeather</li> <li>Yang, Q., et al. (2024). Local Off-Grid Weather Forecasting with Multi-Modal Earth Observation Data</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<pre><code>flowchart TB\n    subgraph Data Sources\n        HRRR[NOAA HRRR&lt;br/&gt;3km gridded forecasts]\n        MADIS[MADIS Stations&lt;br/&gt;Regional observations]\n        LOCAL[Local Sensor&lt;br/&gt;Ultrasonic anemometer]\n    end\n\n    subgraph Data Pipeline\n        FETCH[Data Fetcher&lt;br/&gt;Hourly HRRR download]\n        ALIGN[Alignment&lt;br/&gt;Spatial/temporal sync]\n    end\n\n    subgraph Model\n        SPATIAL[Spatial Encoder&lt;br/&gt;Grid transformer]\n        STATION[Station Encoder&lt;br/&gt;Observation tokens]\n        FUSION[Cross-Attention&lt;br/&gt;Fusion module]\n        DECODER[Decoder&lt;br/&gt;Local prediction]\n    end\n\n    subgraph Output\n        FORECAST[6-48hr Forecast&lt;br/&gt;Wind speed &amp; direction]\n        HA[Home Assistant&lt;br/&gt;Widget display]\n    end\n\n    HRRR --&gt; FETCH\n    FETCH --&gt; ALIGN\n    MADIS --&gt; ALIGN\n    LOCAL --&gt; ALIGN\n\n    ALIGN --&gt; SPATIAL\n    ALIGN --&gt; STATION\n\n    SPATIAL --&gt; FUSION\n    STATION --&gt; FUSION\n    FUSION --&gt; DECODER\n\n    DECODER --&gt; FORECAST\n    FORECAST --&gt; HA</code></pre>"},{"location":"#data-flow","title":"Data Flow","text":"<ol> <li>Gridded Forecasts: NOAA HRRR provides 3km resolution wind forecasts, downloaded hourly</li> <li>Station Observations: MADIS network stations provide ground truth from the surrounding region</li> <li>Local Sensor: DIY ultrasonic anemometer captures hyperlocal conditions</li> <li>Fusion: Multi-modal transformer combines coarse forecasts with sparse observations</li> <li>Prediction: Model outputs corrected forecasts for the exact sensor location</li> </ol>"},{"location":"#hardware-stack","title":"Hardware Stack","text":"Component Description Sensor DIY ultrasonic anemometer (40kHz transducers) Logger Raspberry Pi 4 with RS-485 interface Power 20W solar panel + 12V battery Enclosure 3D printed weatherproof housing"},{"location":"#model-architecture","title":"Model Architecture","text":"<p>The transformer architecture processes two input streams:</p> <ul> <li>Spatial encoder: Treats HRRR grid points as tokens, applies self-attention to capture regional patterns</li> <li>Station encoder: Each weather station becomes a token with positional encoding based on lat/lon</li> <li>Cross-attention fusion: Target location queries both encoders to aggregate relevant information</li> <li>Decoder: Predicts wind speed/direction at forecast horizons (6-48 hours)</li> </ul> <p>Training uses historical HRRR forecasts paired with MADIS observations (2020-2024), validated against held-out local sensor data.</p>"},{"location":"#deployment-architecture","title":"Deployment Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  DIY Sensors    \u2502 \u2500\u2500\u2500\u2500 \u2502          Raspberry Pi               \u2502 \u2500\u2500\u2500\u2500 \u2502 Home Assistant  \u2502\n\u2502  (Anemometer,   \u2502      \u2502  \u2022 Data storage                     \u2502      \u2502                 \u2502\n\u2502   Temperature,  \u2502      \u2502  \u2022 ML forecast processing           \u2502      \u2502  Weather entity \u2502\n\u2502   etc.)         \u2502      \u2502  \u2022 Local prediction generation      \u2502      \u2502  integrations   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Physical Data Flow:</p> <ol> <li>Sensors \u2192 Raspberry Pi: Local sensors connect to the Pi via a common sensors library, logging observations to local storage</li> <li>Forecast Processing: The Pi runs the trained ML model, combining local sensor data with regional forecasts (HRRR/GFS) to generate hyperlocal predictions</li> <li>Home Assistant Integration: Predictions are exposed as Home Assistant entities, enabling integration with automations, dashboards, and alerts</li> </ol>"},{"location":"data-sources-setup/","title":"Data Sources Setup Guide","text":"<p>This guide covers how to set up access to the weather data sources used by LOAF for training and inference.</p>"},{"location":"data-sources-setup/#overview","title":"Overview","text":"<p>LOAF uses three primary data sources:</p> Source Resolution Purpose Registration ERA5 31 km Global reanalysis baseline Free (instant) HRRR 3 km High-res regional forecasts None required MADIS Point Ground truth observations Free (1-2 days)"},{"location":"data-sources-setup/#era5-copernicus-climate-data-store","title":"ERA5 (Copernicus Climate Data Store)","text":"<p>ERA5 is the ECMWF's fifth-generation atmospheric reanalysis, providing hourly data on many atmospheric, land, and oceanic climate variables from 1940 to present.</p>"},{"location":"data-sources-setup/#step-1-create-an-account","title":"Step 1: Create an Account","text":"<ol> <li>Go to https://cds.climate.copernicus.eu/</li> <li>Click \"Login/Register\" in the top right</li> <li>Complete the registration form</li> <li>Verify your email address</li> </ol>"},{"location":"data-sources-setup/#step-2-get-your-api-key","title":"Step 2: Get Your API Key","text":"<ol> <li>Log in to https://cds.climate.copernicus.eu/</li> <li>Click your username in the top right corner</li> <li>Select \"Profile\" from the dropdown</li> <li>Scroll down to find your API Key section</li> <li>Copy the UID and API Key values</li> </ol>"},{"location":"data-sources-setup/#step-3-create-the-configuration-file","title":"Step 3: Create the Configuration File","text":"<p>Create the file <code>~/.cdsapirc</code> with your credentials:</p> <pre><code>cat &gt; ~/.cdsapirc &lt;&lt; 'EOF'\nurl: https://cds.climate.copernicus.eu/api\nkey: YOUR_UID:YOUR_API_KEY\nEOF\n</code></pre> <p>Replace <code>YOUR_UID:YOUR_API_KEY</code> with your actual credentials. The format should look like: <pre><code>key: 123456:abcd1234-5678-90ef-ghij-klmnopqrstuv\n</code></pre></p>"},{"location":"data-sources-setup/#step-4-secure-the-file","title":"Step 4: Secure the File","text":"<pre><code>chmod 600 ~/.cdsapirc\n</code></pre>"},{"location":"data-sources-setup/#step-5-accept-the-dataset-license","title":"Step 5: Accept the Dataset License","text":"<p>Before downloading ERA5 data, you must accept the license terms:</p> <ol> <li>Visit https://cds.climate.copernicus.eu/datasets/reanalysis-era5-single-levels</li> <li>Scroll to the bottom of the page</li> <li>Click the \"Terms of use\" tab or find the license section</li> <li>Click \"Accept\" to agree to the license terms</li> </ol>"},{"location":"data-sources-setup/#step-6-verify-setup","title":"Step 6: Verify Setup","text":"<p>Test your configuration:</p> <pre><code># Run the integration test\nuv run pytest software/tests/test_era5_download.py::TestIntegration -v\n\n# Or download a small test file\nuv run python -m loaf.data.download.era5 --year 2024 --month 12 -o data/era5\n</code></pre>"},{"location":"data-sources-setup/#troubleshooting","title":"Troubleshooting","text":"<p>Error: \"Missing/incomplete configuration file\" - Ensure <code>~/.cdsapirc</code> exists and has the correct format - Check that there are no extra spaces or characters</p> <p>Error: \"403 Forbidden - required licences not accepted\" - Visit the dataset page and accept the license terms - Make sure you're logged in when accepting</p> <p>Error: \"401 Unauthorized\" - Verify your API key is correct - Regenerate your API key from your profile page if needed</p>"},{"location":"data-sources-setup/#usage","title":"Usage","text":"<pre><code># Download a single month\nuv run python -m loaf.data.download.era5 --year 2024 --month 10\n\n# Download a full year\nuv run python -m loaf.data.download.era5 --year 2024\n\n# Download a date range\nuv run python -m loaf.data.download.era5 --start-year 2024 --start-month 10 --end-year 2024 --end-month 12\n\n# Custom region (default is Seattle/PNW)\nuv run python -m loaf.data.download.era5 --year 2024 --month 12 \\\n    --lat-min 46.5 --lat-max 49.0 \\\n    --lon-min -124.0 --lon-max -121.0\n</code></pre>"},{"location":"data-sources-setup/#hrrr-high-resolution-rapid-refresh","title":"HRRR (High-Resolution Rapid Refresh)","text":"<p>HRRR is NOAA's hourly-updating atmospheric model with 3km resolution over CONUS. Data is freely available on AWS S3 with no authentication required.</p>"},{"location":"data-sources-setup/#setup","title":"Setup","text":"<p>No registration or API keys needed. HRRR data is accessed via the <code>herbie-data</code> library which downloads directly from AWS S3.</p>"},{"location":"data-sources-setup/#usage_1","title":"Usage","text":"<pre><code># Download a single day\nuv run python -m loaf.data.download.hrrr --date 2024-12-15\n\n# Download a date range\nuv run python -m loaf.data.download.hrrr --start-date 2024-12-01 --end-date 2024-12-31\n\n# Custom region\nuv run python -m loaf.data.download.hrrr --date 2024-12-15 \\\n    --lat-min 46.5 --lat-max 49.0 \\\n    --lon-min -124.0 --lon-max -121.0\n</code></pre>"},{"location":"data-sources-setup/#data-availability","title":"Data Availability","text":"<ul> <li>HRRR data is typically available within 1-2 hours of the model run</li> <li>Historical data is available from 2014 to present</li> <li>Each file is approximately 50-100 MB depending on variables selected</li> </ul>"},{"location":"data-sources-setup/#madis-meteorological-assimilation-data-ingest-system","title":"MADIS (Meteorological Assimilation Data Ingest System)","text":"<p>MADIS provides quality-controlled surface observations from multiple networks including ASOS, AWOS, mesonet stations, and citizen weather observers.</p>"},{"location":"data-sources-setup/#step-1-request-access","title":"Step 1: Request Access","text":"<ol> <li>Go to https://madis.ncep.noaa.gov/data_application.shtml</li> <li>Fill out the data access request form</li> <li>Wait for approval (typically 1-2 business days)</li> <li>You'll receive credentials via email</li> </ol>"},{"location":"data-sources-setup/#step-2-configure-credentials","title":"Step 2: Configure Credentials","text":"<p>(Documentation to be added once MADIS module is implemented)</p>"},{"location":"data-sources-setup/#data-networks-in-pnw-region","title":"Data Networks in PNW Region","text":"<ul> <li>WSDOT - Washington State DOT weather stations</li> <li>ODOT - Oregon DOT weather stations</li> <li>CWOP - Citizen Weather Observer Program</li> <li>ASOS/AWOS - Airport weather stations</li> <li>UW - University of Washington stations</li> </ul>"},{"location":"data-sources-setup/#data-storage-requirements","title":"Data Storage Requirements","text":"Scope Duration Approximate Storage Demo/Testing 1-3 months 5-10 GB Training (recommended) 3-5 years 100-200 GB Full Archive 5+ years 300+ GB"},{"location":"data-sources-setup/#recommended-directory-structure","title":"Recommended Directory Structure","text":"<pre><code>data/\n\u251c\u2500\u2500 era5/\n\u2502   \u251c\u2500\u2500 era5_2024_01.nc\n\u2502   \u251c\u2500\u2500 era5_2024_02.nc\n\u2502   \u2514\u2500\u2500 ...\n\u251c\u2500\u2500 hrrr/\n\u2502   \u251c\u2500\u2500 hrrr_20241201.nc\n\u2502   \u251c\u2500\u2500 hrrr_20241202.nc\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 madis/\n    \u251c\u2500\u2500 madis_20241201.nc\n    \u2514\u2500\u2500 ...\n</code></pre>"},{"location":"data-sources-setup/#quick-start-download-3-months-of-data","title":"Quick Start: Download 3 Months of Data","text":"<p>For initial testing and validation, download October-December 2024:</p> <pre><code># ERA5 (requires CDS setup above)\nuv run python -m loaf.data.download.era5 \\\n    --start-year 2024 --start-month 10 \\\n    --end-year 2024 --end-month 12 \\\n    -o data/era5\n\n# HRRR (no setup required)\nuv run python -m loaf.data.download.hrrr \\\n    --start-date 2024-10-01 --end-date 2024-12-31 \\\n    -o data/hrrr\n</code></pre> <p>This will download approximately 5-10 GB of data suitable for initial model training experiments.</p>"},{"location":"dev-log/","title":"Dev Log","text":"<p>Updates on LOAF development progress.</p>"},{"location":"dev-log/2026/01/11/hello-world/","title":"Hello World","text":"<p>Welcome to the LOAF dev log! This is where I'll be posting regular updates on development progress.</p>"},{"location":"dev-log/2026/01/11/hello-world/#what-to-expect","title":"What to expect","text":"<p>This dev log will cover:</p> <ul> <li>New features and improvements</li> <li>Technical deep dives</li> <li>Challenges and solutions</li> <li>Roadmap updates</li> </ul> <p>Stay tuned for more updates!</p>"},{"location":"dev-log/2026/01/12/introducing-loaf-hyperlocal-weather-forecasting-you-can-build/","title":"Introducing LOAF: Hyperlocal Weather Forecasting You Can Build","text":"<p>LOAF (Local Observations and Atmospheric Forecasting) aims to bring hyperlocal weather prediction to anyone with a Raspberry Pi and some sensors. Today I'm sharing why this project exists and where it's headed.</p>"},{"location":"dev-log/2026/01/12/introducing-loaf-hyperlocal-weather-forecasting-you-can-build/#the-problem","title":"The Problem","text":"<p>Weather forecasts work on grids. NOAA's HRRR model runs at 3km resolution. That's fine for knowing if Seattle will get rain, but useless for predicting wind conditions at a specific field site, a backyard wind turbine, or a wildfire evacuation route.</p> <p>Research from MIT's Earth Intelligence Lab (Yang et al., 2024) demonstrated that combining gridded forecasts with sparse local station observations through a multi-modal transformer architecture can reduce prediction error by up to 80% compared to gridded data alone. Their approach fuses regional forecast models (HRRR, ERA5) with local weather station data to generate genuinely local predictions.</p> <p>Commercial companies like Tomorrow.io and ClimaCell offer hyperlocal forecasts, but their systems are proprietary and require ongoing subscriptions. The MIT research code exists on GitHub, but there's no easy way to deploy your own sensor, train a model for your region, and run forecasts locally.</p> <p>LOAF fills that gap: an open-source, end-to-end system from sensor to forecast.</p>"},{"location":"dev-log/2026/01/12/introducing-loaf-hyperlocal-weather-forecasting-you-can-build/#why-start-with-wind","title":"Why Start with Wind","text":"<p>Wind is the ideal first target:</p> <ul> <li>Validated approach: The MIT paper specifically tested on wind data from MADIS weather stations</li> <li>High value: Wind prediction matters for wildfire danger assessment, renewable energy, and outdoor operations</li> <li>Simpler validation: Ground truth is easier to verify than precipitation or cloud cover</li> <li>Existing data: HRRR provides 3km resolution wind forecasts we can downscale</li> </ul> <p>We'll forecast near-surface wind speed (m/s) and direction (degrees), 6-48 hours ahead with hourly updates.</p>"},{"location":"dev-log/2026/01/12/introducing-loaf-hyperlocal-weather-forecasting-you-can-build/#beyond-wind","title":"Beyond Wind","text":"<p>Once the wind pipeline works, the architecture generalizes. Temperature, humidity, and precipitation follow the same pattern: gridded forecast + local observations \u2192 transformer fusion \u2192 hyperlocal prediction. The goal is a complete local weather station that improves on regional forecasts for all variables.</p>"},{"location":"dev-log/2026/01/12/introducing-loaf-hyperlocal-weather-forecasting-you-can-build/#why-open-source-hardware","title":"Why Open Source Hardware","text":"<p>Commercial weather stations lock you into proprietary data loggers and cloud services. A Davis anemometer needs a Davis logger. HOBO sensors need HOBO infrastructure.</p> <p>LOAF uses commodity hardware:</p> <ul> <li>Raspberry Pi for data logging and inference</li> <li>Standard sensors with documented protocols (RS-485, SDI-12)</li> <li>Solar power for remote deployment</li> <li>Complete bill of materials with part numbers</li> </ul> <p>Anyone can build, modify, and repair the system. No vendor lock-in, no subscription fees, no cloud dependency.</p>"},{"location":"dev-log/2026/01/12/introducing-loaf-hyperlocal-weather-forecasting-you-can-build/#wind-sensor-research-going-ultrasonic","title":"Wind Sensor Research: Going Ultrasonic","text":"<p>Traditional cup anemometers have moving parts that wear out, require regular calibration, and struggle with low wind speeds. Ultrasonic anemometers measure wind by timing sound pulses between transducers\u2014no moving parts, better low-wind sensitivity, and simultaneous speed/direction measurement.</p> <p>Commercial ultrasonic sensors cost $600-1600. But two open-source projects prove DIY ultrasonic anemometers are viable:</p> <p>QingStation by Jianjia Ma is a compact weather station designed for autonomous maritime drones. It integrates a 2\u00d72 ultrasonic transducer array (40kHz/200kHz) with reflection-based measurement on a 48mm circular PCB drawing ~20mA. The design proves ultrasonic wind measurement works in a small, low-power package.</p> <p>DL1GLH's Ultrasonic Anemometer is a decade-long project achieving \u00b10.3 m/s accuracy (\u00b12% RMS) for speed and \u00b12\u00b0 for direction. The second prototype uses pulse compression, Kalman filtering, and sound reflection to handle turbulence. Eight billion measurements logged during field testing showed 0.9998 correlation against reference instruments.</p> <p>These projects demonstrate that with careful signal processing, a 3D-printed housing and ~$50 in ultrasonic transducers can match commercial sensor accuracy.</p>"},{"location":"dev-log/2026/01/12/introducing-loaf-hyperlocal-weather-forecasting-you-can-build/#whats-next","title":"What's Next","text":"<ol> <li>Hardware assembly: Raspberry Pi + ultrasonic anemometer prototype</li> <li>Data pipeline: Automated HRRR download, MADIS station integration</li> <li>Model training: Adapt MIT's transformer architecture for Seattle area</li> <li>Edge deployment: Run inference on the Pi itself</li> </ol> <p>First sensor goes up this month. Updates to follow.</p>"},{"location":"dev-log/2026/01/13/wind-sensors/","title":"Wind Sensors!","text":"<p>We're kicking off LOAF hardware development with wind sensors. Here's why wind comes first, why ultrasonic anemometers are the right approach, and what open source options exist today.</p>"},{"location":"dev-log/2026/01/13/wind-sensors/#why-wind-first","title":"Why Wind First?","text":"<p>The MIT Earth Intelligence Lab paper that inspired LOAF tested their multi-modal transformer approach on several weather variables. Their key finding: combining gridded forecasts with local station observations reduces prediction error by up to 80% compared to using gridded data alone.</p> <p>Wind benefits the most from this approach. The paper tested on MADIS weather station data, fusing HRRR forecasts with local observations for wind speed, temperature, and dewpoint. Wind prediction showed the largest improvements because it has the highest spatial variability\u2014what the model learns from a station 10km away tells you less about wind than about temperature.</p> <p>This makes sense: wind is highly local. A 3km forecast grid can't capture how terrain, buildings, and vegetation affect airflow at your specific site. Temperature and humidity vary more gradually across space, but wind can differ substantially between two points 100 meters apart.</p> <p>Wind also has immediate practical value:</p> <ul> <li>Wildfire risk assessment: Wind speed and direction drive fire behavior</li> <li>Renewable energy: Small wind turbines and solar trackers need local wind data</li> <li>Outdoor operations: Agriculture, construction, drone flights all depend on wind conditions</li> </ul> <p>Starting with the variable that benefits most from hyperlocal correction lets us validate the full pipeline before expanding to other measurements.</p>"},{"location":"dev-log/2026/01/13/wind-sensors/#why-ultrasonic-anemometers","title":"Why Ultrasonic Anemometers?","text":"<p>Traditional cup anemometers spin in the wind. Simple, proven, but limited:</p> <ul> <li>Moving parts wear out: Bearings degrade, especially in dusty or salty environments</li> <li>Inertia: Cups take time to spin up and slow down, missing gusts and rapid changes</li> <li>Separate vane needed: Cup anemometers measure speed only; you need a separate wind vane for direction</li> <li>Low-wind threshold: Most cup sensors can't measure below 1-2 m/s</li> </ul> <p>Ultrasonic anemometers measure wind by timing sound pulses between transducers. Wind speeds up sound traveling downwind and slows it traveling upwind. Comparing transit times in multiple directions gives speed and direction simultaneously.</p> <pre><code>       T1          T2\n        \\         /\n         \\       /\n          \\     /\n           \\   /\n        \u2500\u2500\u2500\u2500\u25bc\u2500\u25bc\u2500\u2500\u2500\u2500  reflector plate\n           /   \\\n          /     \\\n         /       \\\n\n    Each transducer sends a pulse down to the reflector\n    and receives the echo. Wind shifts the sound path.\n\n    4 transducers in a square pattern \u2192 2D wind vector\n    Compare transit times across all 4 to get speed + direction\n</code></pre> <p>The advantages:</p> <ul> <li>No moving parts: Nothing to wear out or calibrate mechanically</li> <li>Better low-wind sensitivity: Can measure down to 0.1 m/s</li> <li>Faster response: Captures gusts and turbulence at 10+ Hz</li> <li>Simultaneous 2D or 3D measurement: Speed and direction from the same sensor</li> <li>Lower maintenance: No bearings to replace</li> </ul>"},{"location":"dev-log/2026/01/13/wind-sensors/#why-open-source-hardware","title":"Why Open Source Hardware?","text":"<p>Commercial weather stations lock you into ecosystems. A Davis anemometer needs a Davis logger. Each vendor has proprietary data formats, cloud services, and replacement parts.</p> <p>Open source hardware means:</p> <ul> <li>No vendor lock-in: Standard interfaces (RS-485, SDI-12, I2C) work with any logger</li> <li>Repairable: Full schematics, BOMs, and 3D print files let you fix or modify anything</li> <li>Transparent: You know exactly what's being measured and how</li> <li>Reproducible: Other researchers can build identical sensors for comparative studies</li> <li>Evolvable: The community can improve designs over time</li> </ul> <p>For a project like LOAF that aims to democratize hyperlocal forecasting, proprietary hardware defeats the purpose.</p>"},{"location":"dev-log/2026/01/13/wind-sensors/#survey-of-open-source-ultrasonic-anemometers","title":"Survey of Open Source Ultrasonic Anemometers","text":"<p>Two projects stand out as serious DIY ultrasonic anemometer efforts:</p>"},{"location":"dev-log/2026/01/13/wind-sensors/#qingstation","title":"QingStation","text":"<p>QingStation by Jianjia Ma is a compact weather station originally designed for autonomous maritime drones. Key specs:</p> <ul> <li>48mm circular PCB with STM32L476 microcontroller</li> <li>2x2 ultrasonic transducer array (40kHz/200kHz)</li> <li>Full sensor suite: barometer, humidity, temperature, compass, light, lightning detection</li> <li>Low power: ~20mA typical operation</li> <li>Well-documented with open source firmware</li> </ul> <p>Limitations for LOAF:</p> <ul> <li>No battery power option: Designed for solar-powered boats with continuous charging. No documented battery operation or sleep modes for intermittent deployment.</li> <li>Too integrated: The all-in-one design bundles compute, sensors, and communication on a single PCB. For LOAF, we want modular sensors that connect to a separate Raspberry Pi logger. This allows mixing sensor types, easier repairs, and running ML inference on the Pi.</li> <li>Parts sourcing issues: Some components (specific transducers, lightning sensor) are difficult to source currently. Supply chain constraints make exact replication challenging.</li> </ul>"},{"location":"dev-log/2026/01/13/wind-sensors/#dl1glh-ultrasonic-anemometer","title":"DL1GLH Ultrasonic Anemometer","text":"<p>DL1GLH's project by a German radio amateur represents over a decade of refinement:</p> <ul> <li>Achieves \u00b10.3 m/s accuracy (\u00b12% RMS) and \u00b12\u00b0 direction accuracy</li> <li>Uses pulse compression and Kalman filtering for robust signal processing</li> <li>Eight billion logged measurements validating 0.9998 correlation with reference instruments</li> <li>Extensive documentation of theory, calibration, and field testing</li> </ul> <p>Limitations:</p> <p>Minaly, although interesting, the DL1GLH project by Hardy isn not exactly easy to fabricate.</p> <p>The documentation is clear and the theory is explained well, but some of the fab files are missing  and some of the non core tech choices don't match the modern open-source standards.</p>"},{"location":"dev-log/2026/01/13/wind-sensors/#other-projects","title":"Other Projects","text":"<ul> <li>ESP32 Ultrasonic Anemometer: Simpler ESP32-based design, less validated accuracy</li> <li>Hardy's Ultrasonic Anemometer: Arduino-based, good learning project but not production-ready</li> </ul>"},{"location":"dev-log/2026/01/13/wind-sensors/#our-approach","title":"Our Approach","text":"<p>Given the limitations of existing projects, LOAF will develop a modular ultrasonic anemometer design:</p> <ol> <li>Sensor module: Standalone ultrasonic wind sensor with standard digital output (RS-485 or I2C)</li> <li>Raspberry Pi logger: Handles data collection, HRRR downloads, and ML inference</li> <li>Currently available parts: BOM uses only components readily available from major distributors</li> <li>Battery + solar: Designed for remote deployment from day one</li> </ol> <p>We're starting with QingStation's transducer approach and DL1GLH's signal processing insights, adapted for our modular architecture.</p>"},{"location":"dev-log/2026/01/13/wind-sensors/#whats-next","title":"What's Next","text":"<p>Next post will cover the initial hardware prototype: transducer selection, PCB design decisions, and first bench tests. Stay tuned.</p>"},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/","title":"Reverse Engineering the Ecowitt WS90","text":"<p>Before designing our own ultrasonic anemometer, it helps to see how commercial products solve the same problems. Today I tore down an Ecowitt WS90 to understand their approach.</p>"},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/#the-ws90","title":"The WS90","text":"<p>The WS90 is a consumer-grade ultrasonic weather station that sells for around $150 -&gt; $200. It measures wind speed/direction, temperature, humidity, UV, and light intensity. For the price point, it's interesting to see what engineering tradeoffs they made.</p> <p></p>"},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/#key-findings","title":"Key Findings","text":""},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/#mesh-reflector-instead-of-solid-plate","title":"Mesh Reflector Instead of Solid Plate","text":"<p>The biggest surprise: the ultrasonic transducers reflect off a metal mesh rather than a solid plate. Most DIY designs use solid reflectors.</p> <p></p> <p>The mesh likely serves multiple purposes:</p> <ul> <li>Drainage: Water doesn't pool on the reflector surface</li> <li>Debris clearing: Dust, pollen, and small insects fall through</li> <li>Reduced acoustic resonance: A solid plate can ring, creating spurious echoes</li> </ul> <p>The tradeoff is presumably some signal loss, but with properly tuned transducers and gain, this seems acceptable.</p>"},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/#vibration-isolation-on-transducers","title":"Vibration Isolation on Transducers","text":"<p>Each ultrasonic transducer is mounted with rubber isolation pieces. This decouples the transducers from the housing mechanically.</p> <p></p> <p>Why this matters:</p> <ul> <li>Reduces crosstalk: Vibrations from one transducer firing won't mechanically couple to adjacent transducers</li> <li>Wind noise rejection: Housing vibrations from wind don't inject noise into the acoustic path</li> <li>Temperature stability: Rubber absorbs thermal expansion differences between the transducer and plastic housing</li> </ul>"},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/#stm32-main-processor","title":"STM32 Main Processor","text":"<p>The brains of the unit is an STM32 microcontroller. This is a solid choice\u2014STM32 parts have good timer peripherals for precise ultrasonic timing measurements, low power modes for battery operation, and are well-documented.</p> <p></p>"},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/#mysterious-plastic-extrusions","title":"Mysterious Plastic Extrusions","text":"<p>The plate holding the ultrasonic transducers has numerous plastic extrusion features molded into the surface. Their purpose isn't immediately obvious.</p> <p></p> <p>My best guess: multipath reflection mitigation. In an ultrasonic anemometer, you want the sound to take a direct path from transducer to reflector and back. Any secondary reflections off the housing walls create ghost signals that corrupt the timing measurement.</p> <p>These extrusions might:</p> <ul> <li>Break up coherent reflections from the housing walls</li> <li>Scatter sound energy that would otherwise create standing waves</li> <li>Provide acoustic baffling between transducer pairs</li> </ul> <p>This is worth investigating further. If multipath is a significant issue, similar features might be needed in our open source design.</p>"},{"location":"dev-log/2026/01/14/reverse-engineering-the-ecowitt-ws90/#takeaways-for-loaf","title":"Takeaways for LOAF","text":"<p>Several design decisions from the WS90 are worth considering:</p> <ol> <li>Mesh reflectors could solve the water/debris problem elegantly</li> <li>Rubber isolation for transducers seems essential for reliable operation</li> <li>STM32 is a reasonable processor choice, aligns with QingStation's approach</li> <li>Multipath mitigation in the housing design needs more research</li> </ol> <p>Next step: bench testing to understand how much these features matter for accuracy.</p>"},{"location":"dev-log/2026/01/17/submitted-first-ultrasonic-anemometer-pcb/","title":"Submitted First Ultrasonic Anemometer PCB","text":"<p>Today I submitted the first version of the ultrasonic anemometer PCB for fabrication. This is a big milestone for the LOAF project.</p>"},{"location":"dev-log/2026/01/17/submitted-first-ultrasonic-anemometer-pcb/#design-origins","title":"Design Origins","text":"<p>The PCB design is heavily inspired by the QingStation project, which is an open source ultrasonic weather station. Rather than starting from scratch, building on proven work made sense.</p>"},{"location":"dev-log/2026/01/17/submitted-first-ultrasonic-anemometer-pcb/#simplifications-from-qingstation","title":"Simplifications from QingStation","text":"<p>For this first version, I made several simplifications to focus on the core wind sensing functionality:</p> <ul> <li>Removed the rain sensor - not needed for initial wind measurement testing</li> <li>Removed the microphone - simplifies the analog design</li> <li>Removed the lighting sensor - reduces complexity</li> <li>Removed the RGB sensor - keeping the focus on ultrasonic transducers</li> </ul> <p>The goal was to get a working ultrasonic anemometer with minimal complexity. Additional sensors can be added in future revisions once the core wind measurement is validated.</p>"},{"location":"dev-log/2026/01/17/submitted-first-ultrasonic-anemometer-pcb/#next-steps","title":"Next Steps","text":"<p>While waiting for the boards to arrive, I'll be working on the data system side of LOAF. The goal is to set up the infrastructure for training and merging local models for improved weather predictions. Having the software pipeline ready means we can start collecting and processing data as soon as the hardware is operational.</p> <p>Once the boards arrive:</p> <ol> <li>Assemble and bring up the PCB</li> <li>Test the ultrasonic transducer driving circuit</li> <li>Validate wind speed and direction measurements</li> <li>Compare accuracy against reference anemometers</li> </ol> <p>Excited to see how this first spin performs.</p>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/","title":"ML Pipeline Development Plan","text":"<p>Today I finalized the development plan for the LOAF ML pipeline. This plan outlines how we'll reproduce the LocalizedWeather paper for the Seattle/Pacific Northwest region with continuous forecasting capabilities.</p>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#key-decisions","title":"Key Decisions","text":""},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#phased-approach","title":"Phased Approach","text":"<p>We're taking a two-phase approach:</p> <ol> <li> <p>Phase 1: MADIS Data - First, we'll build the full ML pipeline using existing MADIS weather station observations. This lets us validate the model architecture and training pipeline using publicly available ground truth data from ~50-100 stations in the PNW region.</p> </li> <li> <p>Phase 2: Raspberry Pi Integration - Once the pipeline is working with MADIS data, we'll integrate our own Raspberry Pi sensor hub. This adds our custom ultrasonic anemometer observations to improve hyperlocal predictions at our specific deployment site.</p> </li> </ol>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#two-computer-architecture","title":"Two-Computer Architecture","text":"<p>We're separating concerns between a Linux server (for ML training and inference) and a Raspberry Pi (for sensor data collection). This keeps the heavy ML workload off the edge device while still enabling local sensor integration.</p> <pre><code>Linux Server (ML)          Raspberry Pi (Sensors) [Phase 2]\n\u251c\u2500\u2500 Data download          \u251c\u2500\u2500 Ultrasonic anemometer\n\u251c\u2500\u2500 Model training         \u251c\u2500\u2500 Data logging\n\u251c\u2500\u2500 Hourly inference       \u2514\u2500\u2500 Upload to server\n\u2514\u2500\u2500 Home Assistant API\n</code></pre>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#data-sources","title":"Data Sources","text":"<p>We're using three primary data sources matching the original paper:</p> <ul> <li>ERA5: 31 km global reanalysis baseline (CDS API)</li> <li>HRRR: 3 km high-resolution regional forecasts (AWS S3)</li> <li>MADIS: Ground truth station observations (NOAA)</li> </ul> <p>Seattle region bounds: 46.5\u00b0N to 49.0\u00b0N, -124.0\u00b0W to -121.0\u00b0W</p>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#model-architecture","title":"Model Architecture","text":"<p>The full GNN + ViT architecture from the LocalizedWeather paper:</p> <ol> <li>Heterogeneous MPNN - Message passing between stations and grid points</li> <li>Vision Transformer - Self-attention over spatial tokens</li> <li>Output head - Wind predictions at multiple lead times (6h to 48h)</li> </ol>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#implementation-milestones","title":"Implementation Milestones","text":"<p>Phase 1: MADIS-based pipeline 1. Data Pipeline - Package structure, data downloaders, loaders 2. Model Architecture - Port GNN and transformer components 3. Training Pipeline - Dataset class, training loop, evaluation 4. Inference &amp; API - REST server for forecasts 5. Home Assistant Integration - Weather entity or REST sensor 6. Continuous Operation - Systemd services, cron scheduling</p> <p>Phase 2: Custom sensors 7. Pi Sensor Hub - Raspberry Pi with ultrasonic anemometer integration</p>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#next-steps","title":"Next Steps","text":"<p>Before we start coding:</p> <ol> <li>Register for ERA5/CDS access</li> <li>Register for MADIS data access</li> <li>Verify GPU availability and CUDA version</li> <li>Ensure ~500GB free disk space</li> <li>Clone LocalizedWeather repo for reference</li> </ol> <p>The first coding task will be setting up the package structure and implementing the HRRR download functionality.</p>"},{"location":"dev-log/2026/01/29/ml-pipeline-development-plan/#resources","title":"Resources","text":"<ul> <li>Full Development Plan</li> <li>LocalizedWeather Paper</li> <li>LocalizedWeather GitHub</li> </ul>"},{"location":"dev-log/archive/2026/","title":"2026","text":""}]}